# 目的
乃木坂メンバーやグループの話題は日々入れ替わっているが、それを毎日Xなどで調べてみるのは手間がかかる。
そこで、X上で乃木坂関連で話題になっている事柄を自動で調査・カテゴライズ・まとめをしてくれると便利だと感じた。
そこでX上での乃木坂の話題を整理して、見やすくまとめてくれるアプリケーションの開発を行う

# 要求
・Xから乃木坂に関連するツイートを収集する
・ツイートをカテゴライズする
・カテゴライズしたツイートの概要をまとめる
    ・タイトル
    ・ツイート数
    ・総PV数
    ・総お気に入り数
    ・ツイート例3つ
・その結果を総PV数が多い順に並び替えて上位5カテゴリを表示

# 要件
・ユーザーが日付を指定
・Xのツイートを集められるAPIを使って、以下のフィルタリングでツイートを集める
    ・キーワード：「乃木坂46」
    ・日付：ユーザーが特定した日付
    ・収集ツイート数：人気順で並び替えをしたうえで、上位1000ツイートを収集
・レスポンスとして以下を返してもらい、Dataframe型に整理
    id：ツイートの一意なID
    text：ツイート本文
    public_metrics：エンゲージメント数
・上記のツイートデータをカテゴリ分けする
    〇Embedding（埋め込み）
        Bedrock
        fastText
        ◎sentence-transformers
    〇クラスタリング
        ◎BERTopic
        HDBSCAN
        Top2Vec
・カテゴリ分けしたツイートの総PV数を集計して、上位5カテゴリを特定
・カテゴライズしたツイートを読み込み、タイトルをLLMから作成
・タイトル、ツイート数、総PV数、総お気に入り数、ツイート事例をまとめて出力させる

# 設計概要
ユーザー
  │
  │ 日付指定
  ▼
[データ収集モジュール] ← X API
  │
  │ 生ツイートデータ（id, text, public_metrics）
  ▼
[前処理モジュール] 
  │
  │ テキスト正規化（URL除去、絵文字削除、言語判定）
  ▼
[埋め込み生成モジュール]
  │
  │ 文ベクトル（Embedding）
  │ ┌─────────────┐
  │ │Bedrock       │
  │ │Sentence-BERT │
  │ │fastText      │
  │ └─────────────┘
  ▼
[クラスタリングモジュール]
  │
  │ カテゴリ分け（クラスタID付与）
  │ ┌─────────────┐
  │ │BERTopic      │
  │ │HDBSCAN       │
  │ │Top2Vec       │
  │ └─────────────┘
  ▼
[集計・要約モジュール]
  │
  │ - 総PV数・総お気に入り数の計算
  │ - 各クラスタの代表ツイート3件抽出
  │ - 上位5カテゴリ選定（総PV数順）
  │ - タイトル生成（LLMによる要約）
  ▼
[出力モジュール]
  │
  │ 表形式／DataFrame形式で表示・保存
  │ ┌─────────────────────────────┐
  │ │ カテゴリタイトル             │
  │ │ ツイート数                  │
  │ │ 総PV数                      │
  │ │ 総お気に入り数               │
  │ │ 代表ツイート3件             │
  │ └─────────────────────────────┘

# 備考
ちなみに1日当たり「乃木坂」のキーワードを含んだツイートは
約 5500件




# 参考記事
TwitterAPI.io 詳細検索リファレンス
https://docs.twitterapi.io/api-reference/endpoint/tweet_advanced_search

TwitterAPI.io 導入
https://docs.twitterapi.io/introduction

TwitterAPI.io ダッシュボード
ttps://twitterapi.io/dashboard

sentence-bertのリファレンス
https://sbert.net/docs/sentence_transformer/usage/usage.html

sbertの日本語コーパス
https://huggingface.co/colorfulscoop/sbert-base-ja


# 自然言語カテゴライズ手法
① sentence-transformers × BERTopic
埋め込み：高精度、文脈理解◎
クラスタリング：HDBSCANを内部利用 + トピックラベル自動生成機能あり
メリット：一番手軽、実用例も豊富
デメリット：依存パッケージが多め
👉 デファクト標準、まずはこれ

② sentence-transformers × HDBSCAN
埋め込み：同上
クラスタリング：自前でクラスタ数を決めずに自動抽出可能
メリット：シンプルに設計できる
デメリット：トピック名は自分で生成（TF-IDFなどと組み合わせ要）
👉 自分で「カテゴリ名の抽出」をカスタムしたい人向け

③ sentence-transformers × Top2Vec
埋め込み：内部でDoc2Vecもしくはsentence-transformers
クラスタリング：UMAP + HDBSCANベース
メリット：ドキュメント集合から自動的にトピック構造を作れる
デメリット：日本語対応の事例が少ない
👉 英語コーパス中心なら強い、日本語はBERTopicの方が無難

④ fastText × HDBSCAN / k-means
埋め込み：単語レベルの平均で文ベクトルを作る
クラスタリング：高速処理は可能
メリット：軽量・高速・低コスト
デメリット：意味理解が弱く「乃木坂46卒業」と「高校卒業」を同じクラスタにしがち
👉 大量データ・リソース制約が強い場合向け

⑤ Bedrock Embedding (Titan Embeddings など) × BERTopic
埋め込み：AWSが提供する高精度埋め込みモデル
クラスタリング：BERTopicで可視化まで
メリット：運用がAWS完結、スケーラブル
デメリット：課金・ベンダーロックイン
👉 商用アプリとしてAWS環境に載せたい場合に最適